<configs>

	<setattribute xpath="//triggered_effect[@operation='subtract' and @value='@$MetabolismDuration']" name="value">@$totalMetabolism</setattribute>
	<setattribute xpath="//triggered_effect[@operation='divide' and @value='@$MetabolismDuration']" name="value">@$totalMetabolism</setattribute>
	
	<setattribute xpath="//triggered_effect[@cvar='$cumResistChanceCH' and @value='.12']" name="value">.2</setattribute>
	<setattribute xpath="//triggered_effect[@cvar='$cumResistChanceCH' and @value='.19']" name="value">.25</setattribute>
	<setattribute xpath="//triggered_effect[@cvar='$cumResistChanceCH' and @value='-.003']" name="value">-.002</setattribute>

	<insertAfter xpath="//buff[@name='buffLegSprained']/display_value">
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedSimple"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedVanilla"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedEMT"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedTrauma"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
		</effect_group>
	</insertAfter>
	
	<insertAfter xpath="//buff[@name='buffLegBroken']/display_value">
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedSimple"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedVanilla"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedEMT"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegBracedTrauma"/>
		</effect_group>
	</insertAfter>
	
	<insertAfter xpath="//buff[@name='buffArmSprained']/display_value">
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedSimple"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedVanilla"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedEMT"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedTrauma"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
		</effect_group>
	</insertAfter>
	
	<insertAfter xpath="//buff[@name='buffArmBroken']/display_value">
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedSimple"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedVanilla"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedEMT"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmBracedTrauma"/>
		</effect_group>
	</insertAfter>
	
	<append xpath="//buff[@name='buffStatusCheck01']/effect_group">
		<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffMetabolismMaster"/>
		<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffMetabolismMaster"/>
		<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffMetabolismMaster"/>
		<triggered_effect trigger="onSelfEnteredGame" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800"/>
	</append>
	
	<append xpath="//buff[@name='buffStatusCheck01']/effect_group/triggered_effect[@trigger='onReloadStart']">
		<requirement name="!HasBuff" buff="buffDrugRecogPlus"/>
	</append>

	<append xpath="//buff[@name='buffStatusCheck01']/effect_group/triggered_effect[@trigger='onSelfCrouch']">
		<requirement name="!HasBuff" buff="buffWithdrawalCC03Untreated"/>
	</append>

<!-- Adjust Vanilla buffDrugPainkillers because stun immunity is tied to it -->
	<remove xpath="//buff[@name='buffDrugPainkillers']/effect_group"/>
	<insertAfter xpath="//buff[@name='buffDrugPainkillers']/display_value">
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugPainkillersDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugPainkillersDisplay" operation="set" value="@$buffDrugPainkillersDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugPainkillersDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugPainkillers">
				<requirement name="CVarCompare" cvar="$buffDrugPainkillersDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugPainkillersDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugPainkillersDuration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugPainkillersHealed" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HealthLoss" operation="perc_add" value="-.2"/>
			<passive_effect name="HealthMax" operation="base_add" value="20"/>
			<passive_effect name="BuffResistance" operation="base_add" value="1" tags="buffInjuryStunned01CHTrigger,buffInjuryStunned00,buffInjuryStunned01,buffInjuryStunned01Shotgun,buffInjuryStunned02,buffInjuryStunned02Shotgun,buffInjuryStunned03,buffInjuryStunned03Shotgun"/>
		</effect_group>
	</insertAfter>
	
	
	
	<append xpath="/buffs">
	
	<buff name="buffMetabolismMaster" hidden="true" remove_on_death="false">
	<stack_type value="replace"/>
		<effect_group>
			<requirement name="!HasBuff" buff="buffDrugVitaminsPlus"/>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value="1">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".909">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="1"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".833">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="2"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".769">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="3"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".714">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="4"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".667">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="5"/></triggered_effect>
		</effect_group>
		<effect_group>
			<requirement name="HasBuff" buff="buffDrugVitaminsPlus"/>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".769">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".769">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="1"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".769">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="2"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".769">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="3"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".714">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="4"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="$totalMetabolism" operation="set" value=".667">
				<requirement name="ProgressionLevel" progression_name="perkSlowMetabolism" operation="Equals" value="5"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="buffDetox" name_key="buffDetoxName" description_key="buffDetoxDesc" icon="ui_game_symbol_pills">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDetoxPlusDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDetoxDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDetoxPlusDisplay" operation="set" value="@$buffDetoxDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDetoxPlusDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDetox">
				<requirement name="CVarCompare" cvar="$buffDetoxDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDetoxPlusDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDetoxDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="addictionPainkillers"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffDetoxPerc" operation="multiply" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffDetoxPerc" operation="divide" value="100"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$detoxCounter" operation="add" value="@$buffDetoxPerc"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$buffDetoxPerc" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$detoxCounter" operation="set" value="@$withdrawalMaxDuration">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="@$withdrawalMaxDuration"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDetoxMaster"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffDetoxDisplay"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalPainkillers"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalSteroids"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalRecog"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalFortBites"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalAtomJunkies"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalCovertCats"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalEyeKandy"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalHackers"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalHealthBar"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalJailBreakers"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalNerdTats"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalOhShitzDrops"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalRockBusters"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalSkullCrushers"/>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalSugarButts"/>
		</effect_group>
		<effect_group>
			<passive_effect name="WaterChangeOT" operation="base_add" value=".019"/> <!-- 30 water @ 30 min -->
		</effect_group>
	</buff>

	<buff name="buffDetoxMaster" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>
		
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$detoxCounter" operation="add" value="-2">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$detoxCounter" operation="set" value="0">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LT" value="0"/></triggered_effect>
		</effect_group>
		
		<effect_group>
			<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDetoxDisplay"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDetox"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDetoxMaster"/>
		</effect_group>
	</buff>

	<buff name="buffDetoxDisplay" name_key="buffDetoxDisplayName" description_key="buffDetoxDisplayDesc" showonhud="false" icon="ui_game_symbol_pills">
		<duration value="0"/>
		<update_rate value="1.7"/>
		<display_value value=".detoxDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".detoxDisplayPerc" operation="set" value="@$detoxCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".detoxDisplayPerc" operation="divide" value="108"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".detoxDisplayPerc" operation="set" value="0"/>
		</effect_group>
	</buff>
	
	<buff name="buffsprainedLimbStatus" name_key="buff Sprained Limb" icon="ui_game_symbol_brokenbone" hidden="true" remove_on_death="false" icon_color="255,128,0">
		<stack_type value="replace"/>
		<duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedSimple"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedSimple"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedVanilla"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedVanilla"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedEMT"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedEMT"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedTrauma"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedTrauma"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="2">
				<requirement name="HasBuff" buff="buffLegSprained"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="2">
				<requirement name="HasBuff" buff="buffArmSprained"/></triggered_effect>


			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedSimple"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedSimple"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedVanilla"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedVanilla"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedEMT"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedEMT"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedTrauma"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedTrauma"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="2">
				<requirement name="HasBuff" buff="buffLegSprained"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffStack" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="2">
				<requirement name="HasBuff" buff="buffArmSprained"/></triggered_effect>


			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedSimple"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedSimple"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedVanilla"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedVanilla"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedEMT"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedEMT"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffLegBracedTrauma"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="1">
				<requirement name="HasBuff" buff="buffArmBracedTrauma"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="2">
				<requirement name="HasBuff" buff="buffLegSprained"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="sprainedLimbStatus" operation="set" value="2">
				<requirement name="HasBuff" buff="buffArmSprained"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffsprainedLimbStatus">
				<requirement name="CVarCompare" cvar="sprainedLimbStatus" operation="LTE" value="0"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="injuryHarmfulMedicine" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<requirements compare_type="or">
			<requirement name="!HasBuff" buff="buffPainkillersPlus"/>
			<requirement name="!HasBuff" buff="buffDrugCombo01"/>
			<requirement name="!HasBuff" buff="buffDrugCombo02"/>
		</requirements>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$injuryHarmfulMedicineDuration" operation="add" value="1.5"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$injuryHarmfulMedicineDuration" operation="add" value="-1"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="injuryHarmfulMedicine">
				<requirement name="CVarCompare" cvar="$injuryHarmfulMedicineDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$injuryHarmfulMedicineDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyScreenEffect" effect_name="Blur" intensity=".4" fade="0.5"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyScreenEffect" effect_name="Blur" intensity="0" fade="1"/>
		</effect_group>
	</buff>
	
	<buff name="buffUnsterileInfection" name_key="buff Infection Catch"  hidden="true">
		<damage_type value="Bashing"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="infectionCounter" operation="set" value="5">
				<requirement name="!HasBuff" buff="buffInfectionMain"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="infectionCounter" operation="add" value="10">
				<requirement name="HasBuff" buff="buffInfectionMain"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffInfectionMain"/>
		</effect_group>
	</buff>
	
	<buff name="buffDrugVitaminsPlus" name_key="drugVitamins" description_key="drugVitaminsDesc" icon="ui_game_symbol_pills">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugVitaminsDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugVitaminsDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugVitaminsDisplay" operation="set" value="@$buffDrugVitaminsDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugVitaminsDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugVitaminsPlus">
				<requirement name="CVarCompare" cvar="$buffDrugVitaminsDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugVitaminsDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugVitaminsDuration" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<passive_effect name="BuffResistance" operation="base_add" value="2" tags="buffDysenteryCatchFood,buffDysenteryCatchDrink"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalPainkillers" name_key="buff Withdrawal Painkillers" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalPKStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalPKStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalPKDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalPKDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalPKStage2Duration" operation="multiply" value="@$withdrawalPKDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalPKStage3Duration" operation="multiply" value="@$withdrawalPKDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterPK" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalPKDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalPKDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalPKStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalPKStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterPK" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterPK" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterPK" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugPainkillersDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterPK" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalPKFoodBlockage" operation="set" value="@withdrawalCounterPK"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalPKFoodBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalPKFoodBlockage" operation="set" value="@withdrawalCounterPK"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalPKFoodBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<passive_effect name="FoodMaxBlockage" operation="base_add" value="@.WithdrawalPKFoodBlockage"/>
		</effect_group>
		
		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalPainkillers">
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterPK" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalPK01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalPK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalPK02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalPK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalPK03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalPK03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalPKDisplayPerc" operation="set" value="@withdrawalCounterPK"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalPKDisplayPerc" operation="divide" value="@$withdrawalPKDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalPK01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalPK01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LT" value="@$withdrawalPKStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalPK01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalPK01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LT" value="@$withdrawalPKStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalPK01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalPK01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalPK02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalPK02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GTE" value="@$withdrawalPKStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LT" value="@$withdrawalPKStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalPK02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalPK02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GTE" value="@$withdrawalPKStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LT" value="@$withdrawalPKStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalPK03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalPK03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GTE" value="@$withdrawalPKStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalPK03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalPK03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GTE" value="@$withdrawalPKStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalPainkillers">
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionPainkillers">
				<requirement name="CVarCompare" cvar="withdrawalCounterPK" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionPainkillers" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalPainkillers">
				<requirement name="CVarCompare" cvar="$buffDrugPainkillersDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionPainkillers">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalPK01Untreated" name_key="buffWithdrawalPK01UntreatedName" description_key="buffWithdrawalPK01UntreatedDesc" tooltip_key="buffWithdrawalPK01UntreatedTooltip" icon="ui_game_symbol_withdrawal_pk">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalPKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalPK01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.05"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalPK01GetBetter" name_key="buffWithdrawalPK01GetBetterName" description_key="buffWithdrawalPK01GetBetterDesc" icon="ui_game_symbol_better_pk">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalPKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.011"/> <!-- Loss of 40 water per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalPK02Untreated" name_key="buffWithdrawalPK02UntreatedName" description_key="buffWithdrawalPK02UntreatedDesc" icon="ui_game_symbol_withdrawal_pk" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalPKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalPK02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HealthLoss" operation="perc_add" value=".1"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.15"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.027"/> <!-- Loss of 100 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalPK02GetBetter" name_key="buffWithdrawalPK02GetBetterName" description_key="buffWithdrawalPK02GetBetterDesc" icon="ui_game_symbol_better_pk" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalPKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.10"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 water per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalPK03Untreated" name_key="buffWithdrawalPK03UntreatedName" description_key="buffWithdrawalPK03UntreatedDesc" icon="ui_game_symbol_withdrawal_pk" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalPKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalPK03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HealthLoss" operation="perc_add" value=".2"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.25"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalPK03GetBetter" name_key="buffWithdrawalPK03GetBetterName" description_key="buffWithdrawalPK03GetBetterDesc" icon="ui_game_symbol_better_pk" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalPKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalPK03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HealthLoss" operation="perc_add" value=".2"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.25"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 water per real-time hour -->
		</effect_group>
	</buff>	
	
	<buff name="buffDrugSteroidsPlus" name_key="drugSteroidsPlus" description_key="drugSteroidsDesc" icon="ui_game_symbol_steroids">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugSteroidsDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugSteroidsDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugSteroidsDisplay" operation="set" value="@$buffDrugSteroidsDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugSteroidsDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugSteroidsPlus">
				<requirement name="CVarCompare" cvar="$buffDrugSteroidsDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugSteroidsDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugSteroidsDuration" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<passive_effect name="CarryCapacity" operation="base_set" value="50"/>
			<passive_effect name="StaminaMax" operation="base_add" value="50"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="0.2">
				<requirement name="!HasBuff" buff="buffHealWaterMax"/>
			</passive_effect>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="0.1">
				<requirement name="HasBuff" buff="buffHealWaterMax"/>
			</passive_effect>
			<passive_effect name="RunSpeed" operation="perc_add" value=".1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSteroids" name_key="buff Withdrawal Steroids" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalZZStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalZZStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalZZDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalZZDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalZZStage2Duration" operation="multiply" value="@$withdrawalZZDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalZZStage3Duration" operation="multiply" value="@$withdrawalZZDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalZZDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalZZDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalZZStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalZZStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugSteroidsDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalZZStaminaBlockage" operation="set" value="@withdrawalCounterZZ"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalZZStaminaBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalZZStaminaBlockage" operation="set" value="@withdrawalCounterZZ"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalZZStaminaBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<passive_effect name="StaminaMaxBlockage" operation="base_add" value="@.WithdrawalZZStaminaBlockage"/>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSteroids">
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="set" value="0"/>
			
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalZZ01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalZZ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalZZ02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalZZ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalZZ03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalZZ03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalZZDisplayPerc" operation="set" value="@withdrawalCounterZZ"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalZZDisplayPerc" operation="divide" value="@$withdrawalZZDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalZZ01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalZZ01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LT" value="@$withdrawalZZStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalZZ01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalZZ01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LT" value="@$withdrawalZZStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalZZ01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalZZ01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalZZ02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalZZ02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GTE" value="@$withdrawalZZStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LT" value="@$withdrawalZZStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalZZ02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalZZ02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GTE" value="@$withdrawalZZStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LT" value="@$withdrawalZZStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalZZ03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalZZ03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GTE" value="@$withdrawalZZStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalZZ03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalZZ03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GTE" value="@$withdrawalZZStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSteroids">
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionSteroids">
				<requirement name="CVarCompare" cvar="withdrawalCounterZZ" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionSteroids" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSteroids">
				<requirement name="CVarCompare" cvar="$buffDrugSteroidsDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionSteroids">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalZZ01Untreated" name_key="buffWithdrawalZZ01UntreatedName" description_key="buffWithdrawalZZ01UntreatedDesc" tooltip_key="buffWithdrawalZZ01UntreatedTooltip" icon="ui_game_symbol_withdrawal_ZZ">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalZZDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalZZ01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="CarryCapacity" operation="base_subtract" value="5"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.05"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalZZ01GetBetter" name_key="buffWithdrawalZZ01GetBetterName" description_key="buffWithdrawalZZ01GetBetterDesc" icon="ui_game_symbol_better_ZZ">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalZZDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="CarryCapacity" operation="base_subtract" value="2"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.011"/> <!-- Loss of 40 water per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalZZ02Untreated" name_key="buffWithdrawalZZ02UntreatedName" description_key="buffWithdrawalZZ02UntreatedDesc" icon="ui_game_symbol_withdrawal_ZZ" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalZZDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalZZ02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="CarryCapacity" operation="base_subtract" value="8"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.15"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.027"/> <!-- Loss of 100 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalZZ02GetBetter" name_key="buffWithdrawalZZ02GetBetterName" description_key="buffWithdrawalZZ02GetBetterDesc" icon="ui_game_symbol_better_ZZ" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalZZDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="CarryCapacity" operation="base_subtract" value="5"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.10"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 water per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalZZ03Untreated" name_key="buffWithdrawalZZ03UntreatedName" description_key="buffWithdrawalZZ03UntreatedDesc" icon="ui_game_symbol_withdrawal_ZZ" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalZZDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalZZ03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="CarryCapacity" operation="base_subtract" value="10"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.25"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalZZ03GetBetter" name_key="buffWithdrawalZZ03GetBetterName" description_key="buffWithdrawalZZ03GetBetterDesc" icon="ui_game_symbol_better_ZZ" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalZZDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalZZ03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="CarryCapacity" operation="base_subtract" value="8"/>
			<passive_effect name="StaminaChangeOT" operation="perc_add" value="-.25"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 water per real-time hour -->
		</effect_group>
	</buff>	

	<buff name="buffDrugRecogPlus" name_key="drugRecog" description_key="drugRecogDesc" icon="ui_game_symbol_candy_recog">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugRecogDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugRecogDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugRecogDisplay" operation="set" value="@$buffDrugRecogDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugRecogDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugRecogPlus">
				<requirement name="CVarCompare" cvar="$buffDrugRecogDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugRecogDuration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugRecogDisplay" operation="set" value="0"/>
		</effect_group>
		
		<effect_group>
			<requirement name="HasBuff" buff="buffBandolierChest"/>
				<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value=".10"/>
		</effect_group>
		
		<effect_group>
			<requirement name="HasBuff" buff="buffBandolierLegs"/>
			<requirement name="!HasBuff" buff="buffBandolierChest"/>
				<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value=".10"/>
		</effect_group>
		
		<effect_group>
			<requirement name="!HasBuff" buff="buffBandolierChest"/>
			<requirement name="!HasBuff" buff="buffBandolierLegs"/>
				<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value=".15"/>
		</effect_group>

		<effect_group>
			<passive_effect name="EntityDamage" operation="perc_add" value=".5" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkArchery,admin"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRecog" name_key="buff Withdrawal Recog" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRGStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRGStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRGDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRGDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRGStage2Duration" operation="multiply" value="@$withdrawalRGDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRGStage3Duration" operation="multiply" value="@$withdrawalRGDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterRG" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalRGDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalRGDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalRGStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalRGStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRG" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRG" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRG" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugRecogDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRG" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalRGStaminaBlockage" operation="set" value="@withdrawalCounterRG"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalRGStaminaBlockage" operation="divide" value="360"/> <!-- 30 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalRGStaminaBlockage" operation="set" value="@withdrawalCounterRG"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalRGStaminaBlockage" operation="divide" value="360"/> <!-- 30 @ 180m -->
			<passive_effect name="StaminaMaxBlockage" operation="base_add" value="@.WithdrawalRGStaminaBlockage"/>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalRecog">
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterRG" operation="set" value="0"/>
			
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRG01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRG01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRG02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRG02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRG03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRG03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalRGDisplayPerc" operation="set" value="@withdrawalCounterRG"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalRGDisplayPerc" operation="divide" value="@$withdrawalRGDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRG01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalRG01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LT" value="@$withdrawalRGStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRG01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalRG01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LT" value="@$withdrawalRGStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalRG01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalRG01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRG02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalRG02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GTE" value="@$withdrawalRGStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LT" value="@$withdrawalRGStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRG02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalRG02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GTE" value="@$withdrawalRGStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LT" value="@$withdrawalRGStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRG03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalRG03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GTE" value="@$withdrawalRGStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRG03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalRG03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GTE" value="@$withdrawalRGStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalRecog">
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionRecog">
				<requirement name="CVarCompare" cvar="withdrawalCounterRG" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionRecog" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRecog">
				<requirement name="CVarCompare" cvar="$buffDrugRecogDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionRecog">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRG01Untreated" name_key="buffWithdrawalRG01UntreatedName" description_key="buffWithdrawalRG01UntreatedDesc" tooltip_key="buffWithdrawalRG01UntreatedTooltip" icon="ui_game_symbol_withdrawal_RG">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRGDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalRG01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="SpreadMultiplierHip" operation="perc_add" value="0.05"/>
			<passive_effect name="SpreadMultiplierAiming" operation="perc_add" value="0.05"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalRG01GetBetter" name_key="buffWithdrawalRG01GetBetterName" description_key="buffWithdrawalRG01GetBetterDesc" icon="ui_game_symbol_better_RG">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRGDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.011"/> <!-- Loss of 40 water per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRG02Untreated" name_key="buffWithdrawalRG02UntreatedName" description_key="buffWithdrawalRG02UntreatedDesc" icon="ui_game_symbol_withdrawal_RG" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRGDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalRG02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="SpreadMultiplierHip" operation="perc_add" value="0.10"/>
			<passive_effect name="SpreadMultiplierAiming" operation="perc_add" value="0.10"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.027"/> <!-- Loss of 100 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalRG02GetBetter" name_key="buffWithdrawalRG02GetBetterName" description_key="buffWithdrawalRG02GetBetterDesc" icon="ui_game_symbol_better_RG" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRGDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="SpreadMultiplierHip" operation="perc_add" value="0.05"/>
			<passive_effect name="SpreadMultiplierAiming" operation="perc_add" value="0.05"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 water per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRG03Untreated" name_key="buffWithdrawalRG03UntreatedName" description_key="buffWithdrawalRG03UntreatedDesc" icon="ui_game_symbol_withdrawal_RG" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRGDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalRG03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="SpreadMultiplierHip" operation="perc_add" value="0.2"/>
			<passive_effect name="SpreadMultiplierAiming" operation="perc_add" value="0.2"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 water per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalRG03GetBetter" name_key="buffWithdrawalRG03GetBetterName" description_key="buffWithdrawalRG03GetBetterDesc" icon="ui_game_symbol_better_RG" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRGDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRG03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="SpreadMultiplierHip" operation="perc_add" value="0.15"/>
			<passive_effect name="SpreadMultiplierAiming" operation="perc_add" value="0.15"/>
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 water per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffDrugFortBitesPlus" name_key="drugFortBites" description_key="drugFortBitesDesc" icon="ui_game_symbol_candy_fortitude">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugFortBitesDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugFortBitesDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugFortBitesDisplay" operation="set" value="@$buffDrugFortBitesDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugFortBitesDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugFortBitesPlus">
				<requirement name="CVarCompare" cvar="$buffDrugFortBitesDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugFortBitesDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugFortBitesDuration" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HealthLoss" operation="perc_add" value="-.5"/>
			<passive_effect name="HealthMax" operation="base_add" value="50"/>
			<passive_effect name="HypothermalResist" operation="base_add" value="30"/>
			<passive_effect name="HyperthermalResist" operation="base_add" value="30"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalFortBites" name_key="buff Withdrawal FortBites" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalFBStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalFBStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalFBDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalFBDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalFBStage2Duration" operation="multiply" value="@$withdrawalFBDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalFBStage3Duration" operation="multiply" value="@$withdrawalFBDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterFB" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalFBDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalFBDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalFBStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalFBStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterFB" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterFB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterFB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugFortBitesDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterFB" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalFBHealthBlockage" operation="set" value="@withdrawalCounterFB"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalFBHealthBlockage" operation="divide" value="270"/> <!-- 40 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalFBHealthBlockage" operation="set" value="@withdrawalCounterFB"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalFBHealthBlockage" operation="divide" value="270"/> <!-- 40 @ 180m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.WithdrawalFBHealthBlockage"/>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalFortBites">
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterFB" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalFB01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalFB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalFB02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalFB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalFB03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalFB03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalFBDisplayPerc" operation="set" value="@withdrawalCounterFB"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalFBDisplayPerc" operation="divide" value="@$withdrawalFBDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalFB01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalFB01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LT" value="@$withdrawalFBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalFB01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalFB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LT" value="@$withdrawalFBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalFB01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalFB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalFB02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalFB02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GTE" value="@$withdrawalFBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LT" value="@$withdrawalFBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalFB02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalFB02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GTE" value="@$withdrawalFBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LT" value="@$withdrawalFBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalFB03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalFB03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GTE" value="@$withdrawalFBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalFB03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalFB03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GTE" value="@$withdrawalFBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalFortBites">
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionFortBites">
				<requirement name="CVarCompare" cvar="withdrawalCounterFB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionFortBites" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalFortBites">
				<requirement name="CVarCompare" cvar="$buffDrugFortBitesDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionFortBites">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalFB01Untreated" name_key="buffWithdrawalFB01UntreatedName" description_key="buffWithdrawalFB01UntreatedDesc" tooltip_key="buffWithdrawalFB01UntreatedTooltip" icon="ui_game_symbol_withdrawal_FB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalFBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalFB01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="5"/>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="5"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 food per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalFB01GetBetter" name_key="buffWithdrawalFB01GetBetterName" description_key="buffWithdrawalFB01GetBetterDesc" icon="ui_game_symbol_better_FB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalFBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.011"/> <!-- Loss of 40 food per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalFB02Untreated" name_key="buffWithdrawalFB02UntreatedName" description_key="buffWithdrawalFB02UntreatedDesc" icon="ui_game_symbol_withdrawal_FB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalFBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalFB02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="15"/>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="15"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.027"/> <!-- Loss of 100 food per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalFB02GetBetter" name_key="buffWithdrawalFB02GetBetterName" description_key="buffWithdrawalFB02GetBetterDesc" icon="ui_game_symbol_better_FB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalFBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="10"/>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="10"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 food per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalFB03Untreated" name_key="buffWithdrawalFB03UntreatedName" description_key="buffWithdrawalFB03UntreatedDesc" icon="ui_game_symbol_withdrawal_FB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalFBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalFB03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="25"/>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="25"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 food per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalFB03GetBetter" name_key="buffWithdrawalFB03GetBetterName" description_key="buffWithdrawalFB03GetBetterDesc" icon="ui_game_symbol_better_FB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalFBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalFB03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="20"/>
			<passive_effect name="HypothermalResist" operation="base_subtract" value="20"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 food per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffDrugAtomJunkiesPlus" name_key="drugAtomJunkies" description_key="drugAtomJunkiesDesc" icon="ui_game_symbol_candy_atom_junkies">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugAtomJunkiesDisplay"/><display_value_format value="time"/>
		<effect_group>
				<passive_effect name="BlockDamage" operation="perc_add" value=".5" tags="perkDemolitionsExpert"/>
				<passive_effect name="EntityDamage" operation="perc_add" value=".5" tags="perkDemolitionsExpert"/>
				<passive_effect name="DismemberChance" operation="base_add" value=".40" tags="perkDemolitionsExpert"/>
				<passive_effect name="BlockPickup" operation="base_set" value="1" tags="Mine">
					<requirement name="!HasBuff" buff="buffWithdrawalAtomJunkies"/></passive_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugAtomJunkiesDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugAtomJunkiesDisplay" operation="set" value="@$buffDrugAtomJunkiesDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugAtomJunkiesDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugAtomJunkiesPlus">
				<requirement name="CVarCompare" cvar="$buffDrugAtomJunkiesDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugAtomJunkiesDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugAtomJunkiesDuration" operation="set" value="0"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalAtomJunkies" name_key="buff Withdrawal AtomJunkies" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalAJStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalAJStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalAJDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalAJDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalAJStage2Duration" operation="multiply" value="@$withdrawalAJDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalAJStage3Duration" operation="multiply" value="@$withdrawalAJDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalAJDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalAJDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalAJStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalAJStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugAtomJunkiesDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalAJHealthBlockage" operation="set" value="@withdrawalCounterAJ"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalAJHealthBlockage" operation="divide" value="540"/> <!-- 20 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalAJHealthBlockage" operation="set" value="@withdrawalCounterAJ"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalAJHealthBlockage" operation="divide" value="540"/> <!-- 20 @ 180m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.WithdrawalAJHealthBlockage"/>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalAtomJunkies">
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="set" value="0"/>
			
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalAJ01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalAJ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalAJ02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalAJ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalAJ03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalAJ03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalAJDisplayPerc" operation="set" value="@withdrawalCounterAJ"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalAJDisplayPerc" operation="divide" value="@$withdrawalAJDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalAJ01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalAJ01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LT" value="@$withdrawalAJStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalAJ01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalAJ01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LT" value="@$withdrawalAJStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalAJ01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalAJ01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalAJ02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalAJ02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GTE" value="@$withdrawalAJStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LT" value="@$withdrawalAJStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalAJ02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalAJ02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GTE" value="@$withdrawalAJStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LT" value="@$withdrawalAJStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalAJ03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalAJ03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GTE" value="@$withdrawalAJStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalAJ03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalAJ03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GTE" value="@$withdrawalAJStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalAtomJunkies">
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionAtomJunkies">
				<requirement name="CVarCompare" cvar="withdrawalCounterAJ" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionAtomJunkies" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalAtomJunkies">
				<requirement name="CVarCompare" cvar="$buffDrugAtomJunkiesDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionAtomJunkies">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalAJ01Untreated" name_key="buffWithdrawalAJ01UntreatedName" description_key="buffWithdrawalAJ01UntreatedDesc" tooltip_key="buffWithdrawalAJ01UntreatedTooltip" icon="ui_game_symbol_withdrawal_AJ">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalAJDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalAJ01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-0.1" tags="perkDemolitionsExpert"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 food per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalAJ01GetBetter" name_key="buffWithdrawalAJ01GetBetterName" description_key="buffWithdrawalAJ01GetBetterDesc" icon="ui_game_symbol_better_AJ">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalAJDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.011"/> <!-- Loss of 40 food per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalAJ02Untreated" name_key="buffWithdrawalAJ02UntreatedName" description_key="buffWithdrawalAJ02UntreatedDesc" icon="ui_game_symbol_withdrawal_AJ" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalAJDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalAJ02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-0.15" tags="perkDemolitionsExpert"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.027"/> <!-- Loss of 100 food per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalAJ02GetBetter" name_key="buffWithdrawalAJ02GetBetterName" description_key="buffWithdrawalAJ02GetBetterDesc" icon="ui_game_symbol_better_AJ" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalAJDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-0.1" tags="perkDemolitionsExpert"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 food per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffWithdrawalAJ03Untreated" name_key="buffWithdrawalAJ03UntreatedName" description_key="buffWithdrawalAJ03UntreatedDesc" icon="ui_game_symbol_withdrawal_AJ" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalAJDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalAJ03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-0.25" tags="perkDemolitionsExpert"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 food per real-time hour -->
		</effect_group>
	</buff>
	<buff name="buffWithdrawalAJ03GetBetter" name_key="buffWithdrawalAJ03GetBetterName" description_key="buffWithdrawalAJ03GetBetterDesc" icon="ui_game_symbol_better_AJ" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalAJDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalAJ03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-0.2" tags="perkDemolitionsExpert"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.05"/> <!-- Loss of 200 food per real-time hour -->
		</effect_group>
	</buff>

	<buff name="buffDrugCovertCatsPlus" name_key="drugCovertCats" description_key="drugCovertCatsDesc" icon="ui_game_symbol_candy_covert_cats">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugCovertCatsDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugCovertCatsDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugCovertCatsDisplay" operation="set" value="@$buffDrugCovertCatsDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugCovertCatsDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugCovertCatsPlus">
				<requirement name="CVarCompare" cvar="$buffDrugCovertCatsDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugCovertCatsDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugCovertCatsDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<requirement name="CVarCompare" cvar="_crouching" operation="Equals" value="1"/>
			<requirement name="CVarCompare" cvar="_notAlerted" operation="GT" value="0" target="other"/>
				<passive_effect name="DamageBonus" operation="base_add" value=".5"/> <!--For UI-->
				<passive_effect name="EntityDamage" operation="perc_add" value=".5"/>
				<passive_effect name="NoiseMultiplier" operation="perc_subtract"  value="-.2"/>
				<passive_effect name="LandMineImmunity" operation="base_set" level="1" value="1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalCovertCats" name_key="buff Withdrawal CovertCats" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalCCStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalCCStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalCCDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalCCDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalCCStage2Duration" operation="multiply" value="@$withdrawalCCDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalCCStage3Duration" operation="multiply" value="@$withdrawalCCDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterCC" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalCCDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalCCDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalCCStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalCCStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterCC" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterCC" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterCC" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugCovertCatsDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterCC" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalCCStaminaBlockage" operation="set" value="@withdrawalCounterCC"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalCCStaminaBlockage" operation="divide" value="540"/> <!-- 20 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalCCStaminaBlockage" operation="set" value="@withdrawalCounterCC"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalCCStaminaBlockage" operation="divide" value="540"/> <!-- 20 @ 180m -->
			<passive_effect name="StaminaMaxBlockage" operation="base_add" value="@.WithdrawalCCStaminaBlockage"/>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalCovertCats">
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterCC" operation="set" value="0"/>
	
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalCC01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalCC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalCC02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalCC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalCC03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalCC03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalCCDisplayPerc" operation="set" value="@withdrawalCounterCC"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalCCDisplayPerc" operation="divide" value="@$withdrawalCCDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalCC01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalCC01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LT" value="@$withdrawalCCStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalCC01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalCC01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LT" value="@$withdrawalCCStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalCC01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalCC01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalCC02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalCC02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GTE" value="@$withdrawalCCStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LT" value="@$withdrawalCCStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalCC02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalCC02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GTE" value="@$withdrawalCCStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LT" value="@$withdrawalCCStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalCC03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalCC03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GTE" value="@$withdrawalCCStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalCC03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalCC03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GTE" value="@$withdrawalCCStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalCovertCats">
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionCovertCats">
				<requirement name="CVarCompare" cvar="withdrawalCounterCC" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionCovertCats" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalCovertCats">
				<requirement name="CVarCompare" cvar="$buffDrugCovertCatsDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionCovertCats">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalCC01Untreated" name_key="buffWithdrawalCC01UntreatedName" description_key="buffWithdrawalCC01UntreatedDesc" tooltip_key="buffWithdrawalCC01UntreatedTooltip" icon="ui_game_symbol_withdrawal_CC">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalCCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalCC01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="NoiseMultiplier" operation="perc_add"  value=".1"/>
			<passive_effect name="WalkSpeed" operation="perc_subtract" value=".05"/>
			<passive_effect name="RunSpeed" operation="perc_subtract" value=".5"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value=".05"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalCC01GetBetter" name_key="buffWithdrawalCC01GetBetterName" description_key="buffWithdrawalCC01GetBetterDesc" icon="ui_game_symbol_better_CC">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalCCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="NoiseMultiplier" operation="perc_add"  value=".05"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalCC02Untreated" name_key="buffWithdrawalCC02UntreatedName" description_key="buffWithdrawalCC02UntreatedDesc" icon="ui_game_symbol_withdrawal_CC" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalCCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalCC02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="NoiseMultiplier" operation="perc_add"  value=".2"/>
			<passive_effect name="WalkSpeed" operation="perc_subtract" value=".1"/>
			<passive_effect name="RunSpeed" operation="perc_subtract" value=".1"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value=".1"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalCC02GetBetter" name_key="buffWithdrawalCC02GetBetterName" description_key="buffWithdrawalCC02GetBetterDesc" icon="ui_game_symbol_better_CC" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalCCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="NoiseMultiplier" operation="perc_add"  value=".1"/>
			<passive_effect name="WalkSpeed" operation="perc_subtract" value=".05"/>
			<passive_effect name="RunSpeed" operation="perc_subtract" value=".05"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value=".05"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalCC03Untreated" name_key="buffWithdrawalCC03UntreatedName" description_key="buffWithdrawalCC03UntreatedDesc" icon="ui_game_symbol_withdrawal_CC" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalCCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalCC03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="NoiseMultiplier" operation="perc_add"  value=".3"/>
			<passive_effect name="WalkSpeed" operation="perc_subtract" value=".15"/>
			<passive_effect name="RunSpeed" operation="perc_subtract" value=".15"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value=".15"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalCC03GetBetter" name_key="buffWithdrawalCC03GetBetterName" description_key="buffWithdrawalCC03GetBetterDesc" icon="ui_game_symbol_better_CC" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalCCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalCC03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="NoiseMultiplier" operation="perc_add"  value=".2"/>
			<passive_effect name="WalkSpeed" operation="perc_subtract" value=".1"/>
			<passive_effect name="RunSpeed" operation="perc_subtract" value=".1"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value=".1"/>
		</effect_group>
	</buff>

	<buff name="buffDrugEyeKandyPlus" name_key="drugEyeKandy" description_key="drugEyeKandyDesc" icon="ui_game_symbol_candy_eye_candy">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugEyeKandyDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugEyeKandyDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugEyeKandyDisplay" operation="set" value="@$buffDrugEyeKandyDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugEyeKandyDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugEyeKandyPlus">
				<requirement name="CVarCompare" cvar="$buffDrugEyeKandyDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugEyeKandyDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugEyeKandyDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<requirement name="PlayerLevel" operation="LTE" value="10"/>
			<passive_effect name="LootGamestage" operation="base_add" value="15"/>
		</effect_group>
		<effect_group>
			<requirement name="PlayerLevel" operation="LTE" value="20"/>
			<requirement name="PlayerLevel" operation="GT" value="10"/>
			<passive_effect name="LootGamestage" operation="base_add" value="15"/>
			<passive_effect name="LootGamestage" operation="perc_add" value=".10"/>
		</effect_group>
		<effect_group>
			<requirement name="PlayerLevel" operation="LTE" value="30"/>
			<requirement name="PlayerLevel" operation="GT" value="20"/>
			<passive_effect name="LootGamestage" operation="base_add" value="10"/>
			<passive_effect name="LootGamestage" operation="perc_add" value=".15"/>
		</effect_group>
		<effect_group>
			<requirement name="PlayerLevel" operation="GT" value="30"/>
			<passive_effect name="LootGamestage" operation="base_add" value="10"/>
			<passive_effect name="LootGamestage" operation="perc_add" value=".1"/>
		</effect_group>
		<effect_group>
			<passive_effect name="ScavengingTime" operation="perc_subtract" value=".2"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalEyeKandy" name_key="buff Withdrawal EyeKandy" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalEKStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalEKStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalEKDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalEKDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalEKStage2Duration" operation="multiply" value="@$withdrawalEKDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalEKStage3Duration" operation="multiply" value="@$withdrawalEKDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterEK" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalEKDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalEKDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalEKStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalEKStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterEK" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterEK" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterEK" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugEyeKandyDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterEK" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalEKFoodBlockage" operation="set" value="@withdrawalCounterEK"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalEKFoodBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalEKFoodBlockage" operation="set" value="@withdrawalCounterEK"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalEKFoodBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<passive_effect name="FoodMaxBlockage" operation="base_add" value="@.WithdrawalEKFoodBlockage"/>
			<passive_effect name="FoodChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 food per real-time hour -->
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalEyeKandy">
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterEK" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalEK01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalEK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalEK02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalEK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalEK03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalEK03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalEKDisplayPerc" operation="set" value="@withdrawalCounterEK"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalEKDisplayPerc" operation="divide" value="@$withdrawalEKDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalEK01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalEK01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LT" value="@$withdrawalEKStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalEK01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalEK01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LT" value="@$withdrawalEKStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalEK01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalEK01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalEK02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalEK02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GTE" value="@$withdrawalEKStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LT" value="@$withdrawalEKStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalEK02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalEK02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GTE" value="@$withdrawalEKStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LT" value="@$withdrawalEKStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalEK03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalEK03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GTE" value="@$withdrawalEKStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalEK03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalEK03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GTE" value="@$withdrawalEKStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalEyeKandy">
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionEyeKandy">
				<requirement name="CVarCompare" cvar="withdrawalCounterEK" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionEyeKandy" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalEyeKandy">
				<requirement name="CVarCompare" cvar="$buffDrugEyeKandyDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionEyeKandy">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalEK01Untreated" name_key="buffWithdrawalEK01UntreatedName" description_key="buffWithdrawalEK01UntreatedDesc" tooltip_key="buffWithdrawalEK01UntreatedTooltip" icon="ui_game_symbol_withdrawal_EK">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalEKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalEK01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="ScavengingTime" operation="perc_subtract" value=".1"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalEK01GetBetter" name_key="buffWithdrawalEK01GetBetterName" description_key="buffWithdrawalEK01GetBetterDesc" icon="ui_game_symbol_better_EK">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalEKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="ScavengingTime" operation="perc_subtract" value=".1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalEK02Untreated" name_key="buffWithdrawalEK02UntreatedName" description_key="buffWithdrawalEK02UntreatedDesc" icon="ui_game_symbol_withdrawal_EK" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalEKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalEK02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ScavengingTime" operation="perc_subtract" value=".2"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalEK02GetBetter" name_key="buffWithdrawalEK02GetBetterName" description_key="buffWithdrawalEK02GetBetterDesc" icon="ui_game_symbol_better_EK" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalEKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ScavengingTime" operation="perc_subtract" value=".2"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalEK03Untreated" name_key="buffWithdrawalEK03UntreatedName" description_key="buffWithdrawalEK03UntreatedDesc" icon="ui_game_symbol_withdrawal_EK" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalEKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalEK03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ScavengingTime" operation="perc_subtract" value=".5"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalEK03GetBetter" name_key="buffWithdrawalEK03GetBetterName" description_key="buffWithdrawalEK03GetBetterDesc" icon="ui_game_symbol_better_EK" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalEKDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalEK03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="ScavengingTime" operation="perc_subtract" value=".5"/>
		</effect_group>
	</buff>

	<buff name="buffDrugHackersPlus" name_key="drugHackers" description_key="drugHackersDesc" icon="ui_game_symbol_candy_hackers">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugHackersDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugHackersDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugHackersDisplay" operation="set" value="@$buffDrugHackersDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugHackersDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugHackersPlus">
				<requirement name="CVarCompare" cvar="$buffDrugHackersDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugHackersDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugHackersDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkSalvageOperations"/>
				<passive_effect name="HarvestCount" operation="perc_add" value=".2" tags="salvageHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value=".1" tags="Harvesting"/>
				<passive_effect name="HarvestCount" operation="perc_add" value=".2" tags="butcherHarvest"/>
		</effect_group>
		<effect_group>
			<requirement name="ItemHasTags" tags="attAgility"/>
				<passive_effect name="DismemberChance" operation="base_add" value=".2"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalHackers" name_key="buff Withdrawal Hackers" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHHStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHHStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHHDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHHDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHHStage2Duration" operation="multiply" value="@$withdrawalHHDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHHStage3Duration" operation="multiply" value="@$withdrawalHHDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterHH" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalHHDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalHHDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalHHStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalHHStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHH" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHH" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHH" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugHackersDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHH" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LT" value="0"/>
			</triggered_effect>
			
			<passive_effect name="WaterChangeOT" operation="base_subtract" value="0.022"/> <!-- Loss of 80 food per real-time hour -->
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalHackers">
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterHH" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHH01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHH01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHH02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHH02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHH03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHH03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalHHDisplayPerc" operation="set" value="@withdrawalCounterHH"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalHHDisplayPerc" operation="divide" value="@$withdrawalHHDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHH01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalHH01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LT" value="@$withdrawalHHStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHH01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalHH01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LT" value="@$withdrawalHHStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalHH01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalHH01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHH02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalHH02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GTE" value="@$withdrawalHHStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LT" value="@$withdrawalHHStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHH02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalHH02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GTE" value="@$withdrawalHHStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LT" value="@$withdrawalHHStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHH03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalHH03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GTE" value="@$withdrawalHHStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHH03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalHH03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GTE" value="@$withdrawalHHStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalHackers">
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionHackers">
				<requirement name="CVarCompare" cvar="withdrawalCounterHH" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionHackers" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHackers">
				<requirement name="CVarCompare" cvar="$buffDrugHackersDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionHackers">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalHH01Untreated" name_key="buffWithdrawalHH01UntreatedName" description_key="buffWithdrawalHH01UntreatedDesc" tooltip_key="buffWithdrawalHH01UntreatedTooltip" icon="ui_game_symbol_withdrawal_HH">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHHDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalHH01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="HarvestCount" operation="perc_subtract" value=".1" tags="salvageHarvest"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalHH01GetBetter" name_key="buffWithdrawalHH01GetBetterName" description_key="buffWithdrawalHH01GetBetterDesc" icon="ui_game_symbol_better_HH">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHHDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="HarvestCount" operation="perc_subtract" value=".1" tags="salvageHarvest"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalHH02Untreated" name_key="buffWithdrawalHH02UntreatedName" description_key="buffWithdrawalHH02UntreatedDesc" icon="ui_game_symbol_withdrawal_HH" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHHDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalHH02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HarvestCount" operation="perc_subtract" value=".25" tags="salvageHarvest"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalHH02GetBetter" name_key="buffWithdrawalHH02GetBetterName" description_key="buffWithdrawalHH02GetBetterDesc" icon="ui_game_symbol_better_HH" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHHDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HarvestCount" operation="perc_subtract" value=".15" tags="salvageHarvest"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalHH03Untreated" name_key="buffWithdrawalHH03UntreatedName" description_key="buffWithdrawalHH03UntreatedDesc" icon="ui_game_symbol_withdrawal_HH" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHHDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalHH03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HarvestCount" operation="perc_subtract" value=".5" tags="salvageHarvest"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalHH03GetBetter" name_key="buffWithdrawalHH03GetBetterName" description_key="buffWithdrawalHH03GetBetterDesc" icon="ui_game_symbol_better_HH" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHHDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHH03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="HarvestCount" operation="perc_subtract" value=".3" tags="salvageHarvest"/>
		</effect_group>
	</buff>

	<buff name="buffDrugHealthBarPlus" name_key="drugHealthBar" description_key="drugHealthBarDesc" icon="ui_game_symbol_candy_health_bar">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugHealthBarDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugHealthBarDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugHealthBarDisplay" operation="set" value="@$buffDrugHealthBarDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugHealthBarDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugHealthBarPlus">
				<requirement name="CVarCompare" cvar="$buffDrugHealthBarDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugHealthBarDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugHealthBarDuration" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<!-- heal effect is rolled into $critHitNaturalHealingRate -->
			<passive_effect name="BuffResistance" operation="base_add" value=".5" tags="buffFatiguedTrigger,buffArmSprainedCHTrigger,buffLegSprainedCHTrigger,buffLaceration,buffInfectionCatch,buffAbrasionCatch,buffInjuryStunned01CHTrigger,buffInjuryBleedingTwo,buffInjuryBleedingBarbedWire"/>
			<passive_effect name="HealthMax" operation="base_add" value="30"/>
		</effect_group>	
	</buff>

	<buff name="buffWithdrawalHealthBar" name_key="buff Withdrawal HealthBar" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHBStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHBStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHBDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHBDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHBStage2Duration" operation="multiply" value="@$withdrawalHBDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalHBStage3Duration" operation="multiply" value="@$withdrawalHBDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterHB" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalHBDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalHBDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalHBStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalHBStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHB" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugHealthBarDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterHB" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LT" value="0"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalHealthBar">
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterHB" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHB01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHB02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHB03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalHB03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalHBDisplayPerc" operation="set" value="@withdrawalCounterHB"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalHBDisplayPerc" operation="divide" value="@$withdrawalHBDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHB01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalHB01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LT" value="@$withdrawalHBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHB01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalHB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LT" value="@$withdrawalHBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalHB01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalHB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHB02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalHB02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GTE" value="@$withdrawalHBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LT" value="@$withdrawalHBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHB02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalHB02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GTE" value="@$withdrawalHBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LT" value="@$withdrawalHBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHB03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalHB03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GTE" value="@$withdrawalHBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHB03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalHB03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GTE" value="@$withdrawalHBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalHealthBar">
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionHealthBar">
				<requirement name="CVarCompare" cvar="withdrawalCounterHB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionHealthBar" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalHealthBar">
				<requirement name="CVarCompare" cvar="$buffDrugHealthBarDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionHealthBar">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalHB01Untreated" name_key="buffWithdrawalHB01UntreatedName" description_key="buffWithdrawalHB01UntreatedDesc" tooltip_key="buffWithdrawalHB01UntreatedTooltip" icon="ui_game_symbol_withdrawal_HB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalHB01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$critHitNaturalHealingRate" operation="set" value="1"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalHB01GetBetter" name_key="buffWithdrawalHB01GetBetterName" description_key="buffWithdrawalHB01GetBetterDesc" icon="ui_game_symbol_better_HB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$critHitNaturalHealingRate" operation="set" value="1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalHB02Untreated" name_key="buffWithdrawalHB02UntreatedName" description_key="buffWithdrawalHB02UntreatedDesc" icon="ui_game_symbol_withdrawal_HB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalHB02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03GetBetter"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$critHitNaturalHealingRate" operation="set" value=".8"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalHB02GetBetter" name_key="buffWithdrawalHB02GetBetterName" description_key="buffWithdrawalHB02GetBetterDesc" icon="ui_game_symbol_better_HB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03GetBetter"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$critHitNaturalHealingRate" operation="set" value="1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalHB03Untreated" name_key="buffWithdrawalHB03UntreatedName" description_key="buffWithdrawalHB03UntreatedDesc" icon="ui_game_symbol_withdrawal_HB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalHB03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03GetBetter"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$critHitNaturalHealingRate" operation="set" value=".6"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalHB03GetBetter" name_key="buffWithdrawalHB03GetBetterName" description_key="buffWithdrawalHB03GetBetterDesc" icon="ui_game_symbol_better_HB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalHBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalHB03Untreated"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$critHitNaturalHealingRate" operation="set" value=".8"/>
		</effect_group>
	</buff>

	<buff name="buffDrugJailBreakersPlus" name_key="drugJailBreakers" description_key="drugJailBreakersDesc" icon="ui_game_symbol_candy_jail_breakers">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugJailBreakersDisplay"/><display_value_format value="time"/>
		<!-- Be the daddy to that stubborn lock. Add 1 rank to lockpicking for 2 minutes. -->
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugJailBreakersDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugJailBreakersDisplay" operation="set" value="@$buffDrugJailBreakersDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugJailBreakersDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugJailBreakersPlus">
				<requirement name="CVarCompare" cvar="$buffDrugJailBreakersDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugJailBreakersDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugJailBreakersDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<passive_effect name="RecipeTagUnlocked" operation="base_set" value="1" tags="resourceLockPick,resourceLockPickBundle"/>
			<passive_effect name="LockPickTime" operation="perc_subtract" value=".5"/>
			<passive_effect name="LockPickBreakChance" operation="perc_subtract" value=".5"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalJailBreakers" name_key="buff Withdrawal JailBreakers" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalJBStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalJBStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalJBDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalJBDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalJBStage2Duration" operation="multiply" value="@$withdrawalJBDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalJBStage3Duration" operation="multiply" value="@$withdrawalJBDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterJB" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalJBDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalJBDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalJBStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalJBStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterJB" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterJB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterJB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugJailBreakersDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterJB" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LT" value="0"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalJailBreakers">
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterJB" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalJB01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalJB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalJB02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalJB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalJB03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalJB03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalJBDisplayPerc" operation="set" value="@withdrawalCounterJB"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalJBDisplayPerc" operation="divide" value="@$withdrawalJBDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalJB01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalJB01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LT" value="@$withdrawalJBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalJB01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalJB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LT" value="@$withdrawalJBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalJB01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalJB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalJB02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalJB02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GTE" value="@$withdrawalJBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LT" value="@$withdrawalJBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalJB02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalJB02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GTE" value="@$withdrawalJBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LT" value="@$withdrawalJBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalJB03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalJB03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GTE" value="@$withdrawalJBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalJB03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalJB03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GTE" value="@$withdrawalJBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalJailBreakers">
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionJailBreakers">
				<requirement name="CVarCompare" cvar="withdrawalCounterJB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionJailBreakers" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalJailBreakers">
				<requirement name="CVarCompare" cvar="$buffDrugJailBreakersDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionJailBreakers">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalJB01Untreated" name_key="buffWithdrawalJB01UntreatedName" description_key="buffWithdrawalJB01UntreatedDesc" tooltip_key="buffWithdrawalJB01UntreatedTooltip" icon="ui_game_symbol_withdrawal_JB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalJBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalJB01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="LockPickTime" operation="perc_add" value=".1"/>
			<passive_effect name="LockPickBreakChance" operation="perc_add" value=".1"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalJB01GetBetter" name_key="buffWithdrawalJB01GetBetterName" description_key="buffWithdrawalJB01GetBetterDesc" icon="ui_game_symbol_better_JB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalJBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="LockPickTime" operation="perc_add" value=".1"/>
			<passive_effect name="LockPickBreakChance" operation="perc_add" value=".1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalJB02Untreated" name_key="buffWithdrawalJB02UntreatedName" description_key="buffWithdrawalJB02UntreatedDesc" icon="ui_game_symbol_withdrawal_JB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalJBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalJB02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="LockPickTime" operation="perc_add" value=".25"/>
			<passive_effect name="LockPickBreakChance" operation="perc_add" value=".25"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalJB02GetBetter" name_key="buffWithdrawalJB02GetBetterName" description_key="buffWithdrawalJB02GetBetterDesc" icon="ui_game_symbol_better_JB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalJBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03GetBetter"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$critHitNaturalHealingRate" operation="set" value="1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalJB03Untreated" name_key="buffWithdrawalJB03UntreatedName" description_key="buffWithdrawalJB03UntreatedDesc" icon="ui_game_symbol_withdrawal_JB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalJBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalJB03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="LockPickBreakChance" operation="perc_add" value="2"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalJB03GetBetter" name_key="buffWithdrawalJB03GetBetterName" description_key="buffWithdrawalJB03GetBetterDesc" icon="ui_game_symbol_better_JB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalJBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalJB03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="LockPickTime" operation="perc_add" value=".5"/>
			<passive_effect name="LockPickBreakChance" operation="perc_add" value=".5"/>
		</effect_group>
	</buff>

	<buff name="buffDrugNerdTatsPlus" name_key="drugNerdTats" description_key="drugNerdTatsDesc" icon="ui_game_symbol_candy_nerd_tats">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugNerdTatsDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugNerdTatsDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugNerdTatsDisplay" operation="set" value="@$buffDrugNerdTatsDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugNerdTatsDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugNerdTatsPlus">
				<requirement name="CVarCompare" cvar="$buffDrugNerdTatsDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugNerdTatsDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugNerdTatsDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
		<passive_effect name="CraftingTime" operation="perc_add" value="-.1"/>
		<passive_effect name="PlayerExpGain" operation="perc_add" value=".1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalNerdTats" name_key="buff Withdrawal NerdTats" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalNTStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalNTStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalNTDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalNTDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalNTStage2Duration" operation="multiply" value="@$withdrawalNTDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalNTStage3Duration" operation="multiply" value="@$withdrawalNTDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterNT" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalNTDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalNTDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalNTStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalNTStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterNT" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterNT" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterNT" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugNerdTatsDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterNT" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LT" value="0"/>
			</triggered_effect>
			<passive_effect name="CraftingTime" operation="perc_add" value=".1"/>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalNerdTats">
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterNT" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalNT01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalNT01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalNT02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalNT02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalNT03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalNT03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalNTDisplayPerc" operation="set" value="@withdrawalCounterNT"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalNTDisplayPerc" operation="divide" value="@$withdrawalNTDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalNT01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalNT01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LT" value="@$withdrawalNTStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalNT01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalNT01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LT" value="@$withdrawalNTStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalNT01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalNT01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalNT02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalNT02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GTE" value="@$withdrawalNTStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LT" value="@$withdrawalNTStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalNT02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalNT02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GTE" value="@$withdrawalNTStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LT" value="@$withdrawalNTStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalNT03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalNT03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GTE" value="@$withdrawalNTStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalNT03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalNT03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GTE" value="@$withdrawalNTStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalNerdTats">
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionNerdTats">
				<requirement name="CVarCompare" cvar="withdrawalCounterNT" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionNerdTats" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalNerdTats">
				<requirement name="CVarCompare" cvar="$buffDrugNerdTatsDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionNerdTats">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalNT01Untreated" name_key="buffWithdrawalNT01UntreatedName" description_key="buffWithdrawalNT01UntreatedDesc" tooltip_key="buffWithdrawalNT01UntreatedTooltip" icon="ui_game_symbol_withdrawal_NT">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalNTDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalNT01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="PlayerExpGain" operation="perc_add" value="-.1"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalNT01GetBetter" name_key="buffWithdrawalNT01GetBetterName" description_key="buffWithdrawalNT01GetBetterDesc" icon="ui_game_symbol_better_NT">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalNTDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="PlayerExpGain" operation="perc_add" value="-.1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalNT02Untreated" name_key="buffWithdrawalNT02UntreatedName" description_key="buffWithdrawalNT02UntreatedDesc" icon="ui_game_symbol_withdrawal_NT" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalNTDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalNT02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="PlayerExpGain" operation="perc_add" value="-.2"/>
			<passive_effect name="CraftingTime" operation="perc_add" value=".1"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalNT02GetBetter" name_key="buffWithdrawalNT02GetBetterName" description_key="buffWithdrawalNT02GetBetterDesc" icon="ui_game_symbol_better_NT" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalNTDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="PlayerExpGain" operation="perc_add" value="-.15"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalNT03Untreated" name_key="buffWithdrawalNT03UntreatedName" description_key="buffWithdrawalNT03UntreatedDesc" icon="ui_game_symbol_withdrawal_NT" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalNTDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalNT03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="PlayerExpGain" operation="perc_add" value="-.5"/>
			<passive_effect name="CraftingTime" operation="perc_add" value=".2"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalNT03GetBetter" name_key="buffWithdrawalNT03GetBetterName" description_key="buffWithdrawalNT03GetBetterDesc" icon="ui_game_symbol_better_NT" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalNTDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalNT03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="PlayerExpGain" operation="perc_add" value="-.25"/>
			<passive_effect name="CraftingTime" operation="perc_add" value=".1"/>
		</effect_group>
	</buff>

	<buff name="buffDrugOhShitzDropsPlus" name_key="drugOhShitzDrops" description_key="drugOhShitzDropsDesc" icon="ui_game_symbol_candy_oh_shitz">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugOhShitzDropsDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugOhShitzDropsDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugOhShitzDropsDisplay" operation="set" value="@$buffDrugOhShitzDropsDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugOhShitzDropsDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugOhShitzDropsPlus">
				<requirement name="CVarCompare" cvar="$buffDrugOhShitzDropsDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugOhShitzDropsDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugOhShitzDropsDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<passive_effect name="JumpStrength" operation="perc_add" value=".39"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalOhShitzDrops" name_key="buff Withdrawal OhShitzDrops" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalODStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalODStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalODDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalODDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalODStage2Duration" operation="multiply" value="@$withdrawalODDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalODStage3Duration" operation="multiply" value="@$withdrawalODDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterOD" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalODDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalODDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalODStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalODStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterOD" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterOD" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterOD" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugOhShitzDropsDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterOD" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LT" value="0"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalOhShitzDrops">
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterOD" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalOD01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalOD01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalOD02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalOD02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalOD03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalOD03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalODDisplayPerc" operation="set" value="@withdrawalCounterOD"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalODDisplayPerc" operation="divide" value="@$withdrawalODDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalOD01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalOD01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LT" value="@$withdrawalODStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalOD01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalOD01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LT" value="@$withdrawalODStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalOD01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalOD01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalOD02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalOD02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GTE" value="@$withdrawalODStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LT" value="@$withdrawalODStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalOD02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalOD02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GTE" value="@$withdrawalODStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LT" value="@$withdrawalODStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalOD03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalOD03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GTE" value="@$withdrawalODStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalOD03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalOD03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GTE" value="@$withdrawalODStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalOhShitzDrops">
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionOhShitzDrops">
				<requirement name="CVarCompare" cvar="withdrawalCounterOD" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionOhShitzDrops" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalOhShitzDrops">
				<requirement name="CVarCompare" cvar="$buffDrugOhShitzDropsDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionOhShitzDrops">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalOD01Untreated" name_key="buffWithdrawalOD01UntreatedName" description_key="buffWithdrawalOD01UntreatedDesc" tooltip_key="buffWithdrawalOD01UntreatedTooltip" icon="ui_game_symbol_withdrawal_OD">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalODDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalOD01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="JumpStrength" operation="perc_add" value="-.2"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalOD01GetBetter" name_key="buffWithdrawalOD01GetBetterName" description_key="buffWithdrawalOD01GetBetterDesc" icon="ui_game_symbol_better_OD">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalODDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="JumpStrength" operation="perc_add" value="-.1"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalOD02Untreated" name_key="buffWithdrawalOD02UntreatedName" description_key="buffWithdrawalOD02UntreatedDesc" icon="ui_game_symbol_withdrawal_OD" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalODDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalOD02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="JumpStrength" operation="perc_add" value="-.3"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalOD02GetBetter" name_key="buffWithdrawalOD02GetBetterName" description_key="buffWithdrawalOD02GetBetterDesc" icon="ui_game_symbol_better_OD" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalODDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="JumpStrength" operation="perc_add" value="-.2"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalOD03Untreated" name_key="buffWithdrawalOD03UntreatedName" description_key="buffWithdrawalOD03UntreatedDesc" icon="ui_game_symbol_withdrawal_OD" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalODDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalOD03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="JumpStrength" operation="perc_add" value="-.5"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalOD03GetBetter" name_key="buffWithdrawalOD03GetBetterName" description_key="buffWithdrawalOD03GetBetterDesc" icon="ui_game_symbol_better_OD" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalODDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalOD03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="JumpStrength" operation="perc_add" value="-.3"/>
		</effect_group>
	</buff>

	<buff name="buffDrugRockBustersPlus" name_key="drugRockBusters" description_key="drugRockBustersDesc" icon="ui_game_symbol_candy_rock_busters">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugRockBustersDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugRockBustersDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugRockBustersDisplay" operation="set" value="@$buffDrugRockBustersDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugRockBustersDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugRockBustersPlus">
				<requirement name="CVarCompare" cvar="$buffDrugRockBustersDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugRockBustersDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugRockBustersDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<passive_effect name="HarvestCount" operation="base_set" value="1" tags="artOfMiningLuckyStrikeHarvest"/>
		</effect_group>
		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkMiner69r"/>
				<passive_effect name="HarvestCount" operation="perc_add" value=".2" tags="oreWoodHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value="-.05" tags="Harvesting"/>
				<passive_effect name="BlockDamage" operation="perc_add" value=".2" tags="perkMiner69r,miningTool"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRockBusters" name_key="buff Withdrawal RockBusters" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRBStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRBStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRBDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRBDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRBStage2Duration" operation="multiply" value="@$withdrawalRBDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalRBStage3Duration" operation="multiply" value="@$withdrawalRBDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterRB" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalRBDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalRBDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalRBStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalRBStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRB" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugRockBustersDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterRB" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LT" value="0"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalRockBusters">
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterRB" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRB01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRB02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRB03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalRB03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalRBDisplayPerc" operation="set" value="@withdrawalCounterRB"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalRBDisplayPerc" operation="divide" value="@$withdrawalRBDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRB01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalRB01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LT" value="@$withdrawalRBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRB01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalRB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LT" value="@$withdrawalRBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalRB01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalRB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRB02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalRB02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GTE" value="@$withdrawalRBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LT" value="@$withdrawalRBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRB02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalRB02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GTE" value="@$withdrawalRBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LT" value="@$withdrawalRBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRB03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalRB03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GTE" value="@$withdrawalRBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRB03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalRB03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GTE" value="@$withdrawalRBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalRockBusters">
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionRockBusters">
				<requirement name="CVarCompare" cvar="withdrawalCounterRB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionRockBusters" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalRockBusters">
				<requirement name="CVarCompare" cvar="$buffDrugRockBustersDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionRockBusters">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRB01Untreated" name_key="buffWithdrawalRB01UntreatedName" description_key="buffWithdrawalRB01UntreatedDesc" tooltip_key="buffWithdrawalRB01UntreatedTooltip" icon="ui_game_symbol_withdrawal_RB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalRB01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkMiner69r"/>
				<passive_effect name="HarvestCount" operation="perc_add" value="-.1" tags="oreWoodHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value="-.1" tags="Harvesting"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalRB01GetBetter" name_key="buffWithdrawalRB01GetBetterName" description_key="buffWithdrawalRB01GetBetterDesc" icon="ui_game_symbol_better_RB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkMiner69r"/>
				<passive_effect name="HarvestCount" operation="perc_add" value="-.1" tags="oreWoodHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value="-.1" tags="Harvesting"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRB02Untreated" name_key="buffWithdrawalRB02UntreatedName" description_key="buffWithdrawalRB02UntreatedDesc" icon="ui_game_symbol_withdrawal_RB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalRB02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03GetBetter"/>
		</effect_group>

		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkMiner69r"/>
				<passive_effect name="HarvestCount" operation="perc_add" value="-.25" tags="oreWoodHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value="-.25" tags="Harvesting"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalRB02GetBetter" name_key="buffWithdrawalRB02GetBetterName" description_key="buffWithdrawalRB02GetBetterDesc" icon="ui_game_symbol_better_RB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03GetBetter"/>
		</effect_group>

		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkMiner69r"/>
				<passive_effect name="HarvestCount" operation="perc_add" value="-.15" tags="oreWoodHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value="-.15" tags="Harvesting"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalRB03Untreated" name_key="buffWithdrawalRB03UntreatedName" description_key="buffWithdrawalRB03UntreatedDesc" icon="ui_game_symbol_withdrawal_RB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalRB03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03GetBetter"/>
		</effect_group>

		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkMiner69r"/>
				<passive_effect name="HarvestCount" operation="perc_add" value="-.5" tags="oreWoodHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value="-.5" tags="Harvesting"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalRB03GetBetter" name_key="buffWithdrawalRB03GetBetterName" description_key="buffWithdrawalRB03GetBetterDesc" icon="ui_game_symbol_better_RB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalRBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalRB03Untreated"/>
		</effect_group>

		<effect_group>
			<requirement name="HoldingItemHasTags" tags="perkMiner69r"/>
				<passive_effect name="HarvestCount" operation="perc_add" value="-.3" tags="oreWoodHarvest"/>
				<passive_effect name="PlayerExpGain" operation="perc_add" value="-.3" tags="Harvesting"/>
		</effect_group>
	</buff>

	<buff name="buffDrugSkullCrushersPlus" name_key="drugSkullCrushers" description_key="drugSkullCrushersDesc" icon="ui_game_symbol_candy_skull_crushers">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugSkullCrushersDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugSkullCrushersDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugSkullCrushersDisplay" operation="set" value="@$buffDrugSkullCrushersDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugSkullCrushersDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugSkullCrushersPlus">
				<requirement name="CVarCompare" cvar="$buffDrugSkullCrushersDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugSkullCrushersDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugSkullCrushersDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<passive_effect name="StaminaLoss" operation="perc_add" value="-.2"/>
			<passive_effect name="EntityDamage" operation="perc_add" value=".5" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSkullCrushers" name_key="buff Withdrawal SkullCrushers" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSCStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSCStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSCDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSCDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSCStage2Duration" operation="multiply" value="@$withdrawalSCDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSCStage3Duration" operation="multiply" value="@$withdrawalSCDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterSC" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalSCDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalSCDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalSCStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalSCStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSC" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSC" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSC" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugSkullCrushersDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSC" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LT" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalSCStaminaBlockage" operation="set" value="@withdrawalCounterSC"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".WithdrawalSCStaminaBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalSCStaminaBlockage" operation="set" value="@withdrawalCounterSC"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".WithdrawalSCStaminaBlockage" operation="divide" value="216"/> <!-- 50 @ 180m -->
			<passive_effect name="StaminaMaxBlockage" operation="base_add" value="@.WithdrawalSCStaminaBlockage"/>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSkullCrushers">
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterSC" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSC01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSC02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSC03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSC03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalSCDisplayPerc" operation="set" value="@withdrawalCounterSC"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalSCDisplayPerc" operation="divide" value="@$withdrawalSCDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSC01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalSC01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LT" value="@$withdrawalSCStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSC01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalSC01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LT" value="@$withdrawalSCStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSC01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalSC01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSC02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalSC02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GTE" value="@$withdrawalSCStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LT" value="@$withdrawalSCStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSC02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalSC02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GTE" value="@$withdrawalSCStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LT" value="@$withdrawalSCStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSC03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalSC03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GTE" value="@$withdrawalSCStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSC03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalSC03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GTE" value="@$withdrawalSCStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSkullCrushers">
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionSkullCrushers">
				<requirement name="CVarCompare" cvar="withdrawalCounterSC" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionSkullCrushers" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSkullCrushers">
				<requirement name="CVarCompare" cvar="$buffDrugSkullCrushersDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionSkullCrushers">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSC01Untreated" name_key="buffWithdrawalSC01UntreatedName" description_key="buffWithdrawalSC01UntreatedDesc" tooltip_key="buffWithdrawalSC01UntreatedTooltip" icon="ui_game_symbol_withdrawal_SC">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalSC01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="StaminaLoss" operation="perc_add" value=".1"/>
			<passive_effect name="EntityDamage" operation="perc_add" value="-.1" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalSC01GetBetter" name_key="buffWithdrawalSC01GetBetterName" description_key="buffWithdrawalSC01GetBetterDesc" icon="ui_game_symbol_better_SC">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="StaminaLoss" operation="perc_add" value=".1"/>
			<passive_effect name="EntityDamage" operation="perc_add" value="-.1" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSC02Untreated" name_key="buffWithdrawalSC02UntreatedName" description_key="buffWithdrawalSC02UntreatedDesc" icon="ui_game_symbol_withdrawal_SC" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalSC02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="StaminaLoss" operation="perc_add" value=".2"/>
			<passive_effect name="EntityDamage" operation="perc_add" value="-.2" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalSC02GetBetter" name_key="buffWithdrawalSC02GetBetterName" description_key="buffWithdrawalSC02GetBetterDesc" icon="ui_game_symbol_better_SC" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="StaminaLoss" operation="perc_add" value=".15"/>
			<passive_effect name="EntityDamage" operation="perc_add" value="-.15" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSC03Untreated" name_key="buffWithdrawalSC03UntreatedName" description_key="buffWithdrawalSC03UntreatedDesc" icon="ui_game_symbol_withdrawal_SC" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalSC03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="StaminaLoss" operation="perc_add" value=".5"/>
			<passive_effect name="EntityDamage" operation="perc_add" value="-.5" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalSC03GetBetter" name_key="buffWithdrawalSC03GetBetterName" description_key="buffWithdrawalSC03GetBetterDesc" icon="ui_game_symbol_better_SC" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSCDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSC03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="StaminaLoss" operation="perc_add" value=".25"/>
			<passive_effect name="EntityDamage" operation="perc_add" value="-.25" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler"/>
		</effect_group>
	</buff>

	<buff name="buffDrugSugarButtsPlus" name_key="drugSugarButts" description_key="drugSugarButtsDesc" icon="ui_game_symbol_candy_sugar_butts">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffDrugSugarButtsDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffDrugSugarButtsDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugSugarButtsDisplay" operation="set" value="@$buffDrugSugarButtsDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffDrugSugarButtsDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffDrugSugarButtsPlus">
				<requirement name="CVarCompare" cvar="$buffDrugSugarButtsDuration" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffDrugSugarButtsDisplay" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$buffDrugSugarButtsDuration" operation="set" value="0"/>
		</effect_group>
		<effect_group>
			<passive_effect name="BarteringBuying" operation="base_add" value="0.15"/>
			<passive_effect name="BarteringSelling" operation="base_add" value="0.15"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalSugarButts" name_key="buff Withdrawal SugarButts" hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<update_rate value="1"/>

		<!-- Withdrawal is fully %-based. withdrawalCounter is a float % value. Withdrawal kills the player when it reaches 100%, cures when it reaches 0%. -->
		<effect_group>
			<!-- $withdrawalMaxDuration defined in buffStatusCheck01 (3 hours) -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalMaxDuration" operation="set" value="10800">
				<requirement name="CVarCompare" cvar="$withdrawalMaxDuration" operation="Equals" value="0"/></triggered_effect>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSBStage2Duration" operation="set" value="47"/> <!-- % of the full buff duration -->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSBStage3Duration" operation="set" value="80"/> <!-- % of the full buff duration -->

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSBDisplayDivisor" operation="set" value="@$withdrawalMaxDuration"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSBDisplayDivisor" operation="divide" value="100"/>
				<!-- .withdrawalDisplayPerc = withdrawalCounter / $withdrawalDisplayDivisor	-->
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSBStage2Duration" operation="multiply" value="@$withdrawalSBDisplayDivisor"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="$withdrawalSBStage3Duration" operation="multiply" value="@$withdrawalSBDisplayDivisor"/>
			<!-- cleanup -->
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterSB" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".withdrawalSBDisplayPerc" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalSBDisplayDivisor" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalSBStage2Duration" operation="set" value="0"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="$withdrawalSBStage3Duration" operation="set" value="0"/>
		</effect_group>

		<effect_group name="main loop">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSB" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSB" operation="add" value="-3">
				<requirement name="CVarCompare" cvar="$buffDrugSugarButtsDuration" operation="GT" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="withdrawalCounterSB" operation="set" value="0">
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LT" value="0"/>
			</triggered_effect>
		</effect_group>

		<effect_group name="shut down">
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSugarButts">
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LTE" value="0"/>
			</triggered_effect>
			
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar="withdrawalCounterSB" operation="set" value="0"/>

			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSB01Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSB02Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSB03Untreated"/>
			<triggered_effect trigger="onSelfBuffRemove" action="RemoveBuff" buff="buffWithdrawalSB03GetBetter"/>
		</effect_group>

		<effect_group name="display % values">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalSBDisplayPerc" operation="set" value="@withdrawalCounterSB"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".withdrawalSBDisplayPerc" operation="divide" value="@$withdrawalSBDisplayDivisor"/>
		</effect_group>

		<effect_group name="signaling buffs">
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffDetoxDisplay">
				<requirement name="!HasBuff" buff="buffDetoxDisplay"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSB01Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalSB01Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LT" value="@$withdrawalSBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSB01GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalSB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GT" value="0"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LT" value="@$withdrawalSBStage2Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSB01GetBetter">
				<requirement name="HasBuff" buff="buffWithdrawalSB01GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LTE" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSB02Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalSB02Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GTE" value="@$withdrawalSBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LT" value="@$withdrawalSBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSB02GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalSB02GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GTE" value="@$withdrawalSBStage2Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LT" value="@$withdrawalSBStage3Duration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSB03Untreated">
				<requirement name="!HasBuff" buff="buffWithdrawalSB03Untreated"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GTE" value="@$withdrawalSBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="LTE" value="0"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSB03GetBetter">
				<requirement name="!HasBuff" buff="buffWithdrawalSB03GetBetter"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GTE" value="@$withdrawalSBStage3Duration"/>
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="LT" value="@$withdrawalMaxDuration"/>
				<requirement name="CVarCompare" cvar="$detoxCounter" operation="GT" value="0"/>
			</triggered_effect>

			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffWithdrawalSugarButts">
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionSugarButts">
				<requirement name="CVarCompare" cvar="withdrawalCounterSB" operation="GTE" value="@$withdrawalMaxDuration"/></triggered_effect>
		</effect_group>
	</buff>
	
	<buff name="addictionSugarButts" hidden="true">
		<stack_type value="replace"/><duration value="0"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffWithdrawalSugarButts">
				<requirement name="CVarCompare" cvar="$buffDrugSugarButtsDuration" operation="LTE" value="0"/></triggered_effect>
			<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="addictionSugarButts">
				<requirement name="HasBuff" buff="buffDetox"/></triggered_effect>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSB01Untreated" name_key="buffWithdrawalSB01UntreatedName" description_key="buffWithdrawalSB01UntreatedDesc" tooltip_key="buffWithdrawalSB01UntreatedTooltip" icon="ui_game_symbol_withdrawal_SB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalSB01Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="LootQuantity" operation="perc_add" value="-.1" tags="dukes"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalSB01GetBetter" name_key="buffWithdrawalSB01GetBetterName" description_key="buffWithdrawalSB01GetBetterDesc" icon="ui_game_symbol_better_SB">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03GetBetter"/>
		</effect_group>
		
		<effect_group>
			<passive_effect name="LootQuantity" operation="perc_add" value="-.1" tags="dukes"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSB02Untreated" name_key="buffWithdrawalSB02UntreatedName" description_key="buffWithdrawalSB02UntreatedDesc" icon="ui_game_symbol_withdrawal_SB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalSB02Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="LootQuantity" operation="perc_add" value="-.2" tags="dukes"/>
			<passive_effect name="BarteringBuying" operation="base_subtract" value="0.1"/>
			<passive_effect name="BarteringSelling" operation="base_subtract" value="0.1"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalSB02GetBetter" name_key="buffWithdrawalSB02GetBetterName" description_key="buffWithdrawalSB02GetBetterDesc" icon="ui_game_symbol_better_SB" icon_color="255,128,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="LootQuantity" operation="perc_add" value="-.2" tags="dukes"/>
		</effect_group>
	</buff>

	<buff name="buffWithdrawalSB03Untreated" name_key="buffWithdrawalSB03UntreatedName" description_key="buffWithdrawalSB03UntreatedDesc" icon="ui_game_symbol_withdrawal_SB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<passive_effect name="BuffBlink" operation="base_set" value="2" duration="0,3" tags="buffWithdrawalSB03Untreated"/>

			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03GetBetter"/>
		</effect_group>

		<effect_group>
			<passive_effect name="LootQuantity" operation="perc_add" value="-.5" tags="dukes"/>
			<passive_effect name="BarteringBuying" operation="base_subtract" value="0.25"/>
			<passive_effect name="BarteringSelling" operation="base_subtract" value="0.25"/>
		</effect_group>
	</buff>
	<buff name="buffWithdrawalSB03GetBetter" name_key="buffWithdrawalSB03GetBetterName" description_key="buffWithdrawalSB03GetBetterDesc" icon="ui_game_symbol_better_SB" icon_color="255,0,0">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value="0"/>
		<display_value value=".withdrawalSBDisplayPerc"/><display_value_key value="{0:0.0}%"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB01GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02Untreated"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB02GetBetter"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffWithdrawalSB03Untreated"/>
		</effect_group>

		<effect_group>
			<passive_effect name="LootQuantity" operation="perc_add" value="-.3" tags="dukes"/>
			<passive_effect name="BarteringBuying" operation="base_subtract" value="0.2"/>
			<passive_effect name="BarteringSelling" operation="base_subtract" value="0.2"/>
		</effect_group>
	</buff>
	
	<buff name="buffBoundLaceration" name_key="buffBoundLaceration" description_key="buffBoundLacerationDesc" icon="ui_game_symbol_bound_laceration">
		<stack_type value="replace"/><duration value="0"/>
		<display_value value=".buffBoundLacerationDisplay"/><display_value_format value="time"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLaceration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffBoundLacerationDuration" operation="subtract" value="@$MetabolismDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffBoundLacerationDisplay" operation="set" value="@$buffBoundLacerationDuration"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".buffBoundLacerationDisplay" operation="divide" value="@$MetabolismDuration"/>
		</effect_group>
		<effect_group>
			<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="triggerLaceration"/>
				<requirement name="CVarCompare" cvar="$buffBoundLacerationDuration" operation="LTE" value="0"/>	
		</effect_group>
		<effect_group>
			<requirement name="CVarCompare" cvar="$buffBoundLacerationDuration" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".buffBoundLacerationDisplay" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$buffBoundLacerationDuration" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffBoundLaceration"/>
		</effect_group>
	</buff>
	
	<buff name="buffLegBracedSimple" name_key="buffLegBracedName" description_key="buffLegBracedDesc" icon="ui_game_symbol_braced_leg">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".legHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegSprained"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value=".33"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value=".33"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="subtract" value="@.legTotalHealingRate">
				<requirement name="!EntityHasMovementTag" tags="running"/></triggered_effect>
		</effect_group>

		<effect_group name="activity makes damaged legs worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfJump" action="ModifyStats" stat="Health" operation="subtract" value="1"/>
				<triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12"/>
				<triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffLegGetsWorse"/>

				<triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
				<triggered_effect trigger="onSelfFallImpact" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="2">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$legHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="divide" value="@.legTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$legHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffLegBracedSimple"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.LegHurtHealthBlockage"/>

			<passive_effect name="Mobility" operation="base_add" value="-.18"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value="0.08"/>
		</effect_group>
	</buff>
	
	<buff name="buffLegBracedVanilla" name_key="buffLegBracedName" description_key="buffLegBracedDesc" icon="ui_game_symbol_braced_leg">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".legHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegSprained"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="1"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="subtract" value="@.legTotalHealingRate">
				<requirement name="!EntityHasMovementTag" tags="running"/></triggered_effect>
		</effect_group>

		<effect_group name="activity makes damaged legs worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfJump" action="ModifyStats" stat="Health" operation="subtract" value="1"/>
				<triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12"/>
				<triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffLegGetsWorse"/>

				<triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
				<triggered_effect trigger="onSelfFallImpact" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="2">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$legHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="divide" value="@.legTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$legHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffLegBracedVanilla"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.LegHurtHealthBlockage"/>

			<passive_effect name="Mobility" operation="base_add" value="-.18"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value="0.08"/>
		</effect_group>
	</buff>
	
	<buff name="buffLegBracedEMT" name_key="buffLegBracedName" description_key="buffLegBracedDesc" icon="ui_game_symbol_braced_leg">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".legHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegSprained"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="2"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="2"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="subtract" value="@.legTotalHealingRate">
				<requirement name="!EntityHasMovementTag" tags="running"/></triggered_effect>
		</effect_group>

		<effect_group name="activity makes damaged legs worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfJump" action="ModifyStats" stat="Health" operation="subtract" value="1"/>
				<triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12"/>
				<triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffLegGetsWorse"/>

				<triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
				<triggered_effect trigger="onSelfFallImpact" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="2">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$legHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="divide" value="@.legTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$legHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffLegBracedEMT"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.LegHurtHealthBlockage"/>

			<passive_effect name="Mobility" operation="base_add" value="-.18"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value="0.08"/>
		</effect_group>
	</buff>
	
	<buff name="buffLegBracedTrauma" name_key="buffLegBracedName" description_key="buffLegBracedDesc" icon="ui_game_symbol_braced_leg">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".legHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffLegSprained"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="3"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="add" value="3"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="subtract" value="@.legTotalHealingRate">
				<requirement name="!EntityHasMovementTag" tags="running"/></triggered_effect>
		</effect_group>

		<effect_group name="activity makes damaged legs worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfJump" action="ModifyStats" stat="Health" operation="subtract" value="1"/>
				<triggered_effect trigger="onSelfJump" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12"/>
				<triggered_effect trigger="onSelfJump" action="AddBuff" buff="buffLegGetsWorse"/>

				<triggered_effect trigger="onSelfFallImpact" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="12">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>
				<triggered_effect trigger="onSelfFallImpact" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="CVarCompare" cvar="_fallSpeed" operation="GTE" value=".07"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="add" value="2">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>
				<triggered_effect trigger="onSelfBuffUpdate" action="AddBuff" buff="buffLegGetsWorse">
					<requirement name="EntityHasMovementTag" tags="running"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$legHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="divide" value="@.legTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".legHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$legHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$legHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".legTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffLegBracedTrauma"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="set" value="@$legHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".LegHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.LegHurtHealthBlockage"/>

			<passive_effect name="Mobility" operation="base_add" value="-.18"/>
			<passive_effect name="JumpStrength" operation="perc_subtract" value="0.08"/>
		</effect_group>
	</buff>
	
	<buff name="buffArmBracedSimple" name_key="buffArmBracedName" description_key="buffArmBracedDesc" tooltip_key="buffArmBracedTooltip" icon="ui_game_symbol_braced_arm">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".armHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmSprained"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value=".33"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value=".33"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="subtract" value="@.armTotalHealingRate"/>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="divide" value="@.armTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group name="activity makes damaged arms worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>

				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyStats" stat="Health" operation="subtract" value="1">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$armHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffArmBraced"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.ArmHurtHealthBlockage"/>

			<passive_effect name="WeaponHandling" operation="perc_add" value="-.2" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-.25" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="AttacksPerMinute" operation="perc_add" value="-.2" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler,admin"/>
		</effect_group>
	</buff>
	
	<buff name="buffArmBracedVanilla" name_key="buffArmBracedName" description_key="buffArmBracedDesc" tooltip_key="buffArmBracedTooltip" icon="ui_game_symbol_braced_arm">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".armHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value="1"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value="1"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="subtract" value="@.armTotalHealingRate"/>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="divide" value="@.armTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group name="activity makes damaged arms worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>

				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyStats" stat="Health" operation="subtract" value="1">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$armHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffArmBraced"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.ArmHurtHealthBlockage"/>

			<passive_effect name="WeaponHandling" operation="perc_add" value="-.2" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-.25" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="AttacksPerMinute" operation="perc_add" value="-.2" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler,admin"/>
		</effect_group>
	</buff>
	
	<buff name="buffArmBracedEMT" name_key="buffArmBracedName" description_key="buffArmBracedDesc" tooltip_key="buffArmBracedTooltip" icon="ui_game_symbol_braced_arm">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".armHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>
			<triggered_effect trigger="onSelfBuffStart" action="RemoveBuff" buff="buffArmSprained"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value="2"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value="2"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="subtract" value="@.armTotalHealingRate"/>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="divide" value="@.armTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group name="activity makes damaged arms worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>

				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyStats" stat="Health" operation="subtract" value="1">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$armHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffArmBraced"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.ArmHurtHealthBlockage"/>

			<passive_effect name="WeaponHandling" operation="perc_add" value="-.2" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-.25" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="AttacksPerMinute" operation="perc_add" value="-.2" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler,admin"/>
		</effect_group>
	</buff>
	
	<buff name="buffArmBracedTrauma" name_key="buffArmBracedName" description_key="buffArmBracedDesc" tooltip_key="buffArmBracedTooltip" icon="ui_game_symbol_braced_arm">
		<damage_type value="sprain"/>
		<duration value="0"/>
		<display_value value=".armHurtDurationDisplay"/><display_value_format value="time"/>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffsprainedLimbStatus"/>

			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value="3"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="@$critHitNaturalHealingRate"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="add" value="3"/>

			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="subtract" value="@.armTotalHealingRate"/>
		</effect_group>

		<effect_group name="DisplayDuration">
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="divide" value="@.armTotalHealingRate"/>
			<triggered_effect trigger="onSelfBuffRemove" action="ModifyCVar" cvar=".armHurtDurationDisplay" operation="set" value="0"/>
		</effect_group>

		<effect_group name="activity makes damaged arms worse">
			<requirement name="!HasBuff" buff="buffDrugSteroids"/>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>
				<triggered_effect trigger="onSelfPrimaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="ranged"/></triggered_effect>

				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyStats" stat="Health" operation="subtract" value="1">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="ModifyCVar" cvar="$armHurtCounter" operation="add" value="4">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>
				<triggered_effect trigger="onSelfSecondaryActionEnd" action="AddBuff" buff="buffArmGetsWorse">
					<requirement name="HoldingItemHasTags" tags="melee"/></triggered_effect>

				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="605">
					<requirement name="CVarCompare" cvar="$armHurtCounter" operation="GT" value="605"/></triggered_effect>
		</effect_group>

		<effect_group>
			<requirement name="CVarCompare" cvar="$armHurtCounter" operation="LTE" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar="$armHurtCounter" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".armTotalHealingRate" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="0"/>
				<triggered_effect trigger="onSelfBuffUpdate" action="RemoveBuff" buff="buffArmBraced"/>
		</effect_group>

		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="set" value="@$armHurtCounter"/>
			<triggered_effect trigger="onSelfBuffUpdate" action="ModifyCVar" cvar=".ArmHurtHealthBlockage" operation="divide" value="20"/> <!-- 15 @ 30m -->
			<passive_effect name="HealthMaxBlockage" operation="base_add" value="@.ArmHurtHealthBlockage"/>

			<passive_effect name="WeaponHandling" operation="perc_add" value="-.2" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="ReloadSpeedMultiplier" operation="perc_add" value="-.25" tags="perkGunslinger,perkBoomstick,perkDeadEye,perkMachineGunner,perkBookAutoWeapons,perkTurrets,perkArchery,admin"/>
			<passive_effect name="AttacksPerMinute" operation="perc_add" value="-.2" tags="perkMiner69r,perkSalvageOperations,perkElectrocutioner,perkJavelinMaster,perkPummelPete,perkSkullCrusher,perkDeepCuts,perkBrawler,admin"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchPK" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterPK" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalPainkillers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterPK" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalPainkillers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalPainkillers"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchZZ" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalSteroids"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterZZ" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalSteroids"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalSteroids"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchRG" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterRG" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalRecog"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterRG" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalRecog"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalRecog"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchFB" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterFB" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalFortBites"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterFB" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalFortBites"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalFortBites"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchAJ" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalAtomJunkies"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterAJ" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalAtomJunkies"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalAtomJunkies"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchCC" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterCC" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalCovertCats"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterCC" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalCovertCats"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalCovertCats"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchEK" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterEK" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalEyeKandy"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterEK" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalEyeKandy"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalEyeKandy"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchHH" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterHH" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalHackers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterHH" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalHackers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalHackers"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchHB" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterHB" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalHealthBar"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterHB" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalHealthBar"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalHealthBar"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchJB" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterJB" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalJailBreakers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterJB" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalJailBreakers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalJailBreakers"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchNT" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterNT" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalNerdTats"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterNT" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalNerdTats"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalNerdTats"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchOD" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterOD" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalOhShitzDrops"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterOD" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalOhShitzDrops"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalOhShitzDrops"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchRB" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterRB" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalRockBusters"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterRB" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalRockBusters"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalRockBusters"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchSC" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterSC" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalSkullCrushers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterSC" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalSkullCrushers"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalSkullCrushers"/>
		</effect_group>
	</buff>
	
	<buff name="buffWithdrawalCatchSB" name_key="buff Withdrawal Catch"  hidden="true">
		<damage_type value="Disease"/>
		<stack_type value="ignore"/>
		<duration value=".1"/>
		<effect_group>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterSB" operation="set" value="25">
				<requirement name="!HasBuff" buff="buffWithdrawalSugarButts"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="ModifyCVar" cvar="withdrawalCounterSB" operation="add" value="2200">
				<requirement name="HasBuff" buff="buffWithdrawalSugarButts"/>
			</triggered_effect>
			<triggered_effect trigger="onSelfBuffStart" action="AddBuff" buff="buffWithdrawalSugarButts"/>
		</effect_group>
	</buff>
	
	</append>
	
</configs>